<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cu.dao.ResultDao">
    <resultMap id="Result" type="com.cu.model.Result">
        <result column="user_id" property="user_id"/>
        <result column="search_time" property="search_time"/>
        <result column="type" property="type"/>
        <result column="balk_no" property="balk_no"/>
        <result column="balk_content" property="balk_content"/>
        <result column="write_dept_name" property="write_dept_name"/>
        <result column="intro" property="intro"/>
        <result column="content_key" property="content_key"/>
        <result column="proc_key" property="proc_key"/>
        <result column="problem" property="problem"/>
        <result column="reason" property="reason"/>
    </resultMap>

    <insert id="insertResult">
        INSERT INTO result (user_id, search_time, type, balk_no, balk_content, write_dept_name, operation_type, write_user_name, write_time, intro, content_key, proc_key) VALUES
        <foreach collection="resultList" item="item" separator=",">
            (#{item.user_id},#{item.search_time},#{item.type},#{item.balk_no},#{item.balk_content},
            #{item.write_dept_name},#{item.operation_type},#{item.write_user_name},
            #{item.write_time},#{item.intro},#{item.content_key},#{item.proc_key})
        </foreach>
    </insert>

    <select id="searchTimeList" resultType="String">
        SELECT DISTINCT search_time FROM result ORDER BY search_time DESC
    </select>

    <select id="queryBySearchTime" resultMap="Result">
        SELECT * FROM result WHERE search_time=#{search_time}
    </select>

    <select id="queryByProblem" resultMap="Result">
        SELECT * FROM result
        WHERE  result.problem IN
        <foreach collection="problems" item="item" index="index" open="(" separator="," close=")">
            #{item}
        </foreach>
    </select>
</mapper>